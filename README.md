# Candy-shop

Этот проект представляет собой систему для управления товарами и категориями в магазине. Он включает классы для работы с продуктами, категорию продуктов, а также дополнительные возможности по парсингу данных и обновлению информации о товарах.

## Описание классов

### 1. Product

Класс для представления продукта с такими атрибутами как название, описание, цена и количество.

**Атрибуты:**
- `name` (str) — Название продукта.
- `description` (str) — Описание продукта.
- `price` (float) — Цена продукта.
- `quantity` (int) — Количество продукта в наличии.

**Методы:**
- `__init__(name, description, price, quantity)` — Инициализирует объект продукта с заданными значениями.
- `price` (property) — Геттер для получения цены продукта.
- `price` (setter) — Сеттер для установки цены продукта с проверкой. При снижении цены запрашивается подтверждение.
- `quantity` (property) — Геттер для получения количества продукта.
- `quantity` (setter) — Сеттер для установки количества продукта с проверкой (значение не может быть отрицательным).
- `new_product(prod, existing_products)` — Создает новый продукт из словаря или обновляет существующий продукт, если продукт с таким именем уже имеется. При обновлении увеличивается количество, а цена устанавливается максимальной.
- `__add__` — Переопределенный оператор сложения для расчета суммарной стоимости товаров. **Важно:** сложение разрешено только для объектов одного класса.

### 2. Category

Класс для представления категории товаров, которая может включать несколько продуктов.

**Атрибуты:**
- `name` (str) — Название категории.
- `description` (str) — Описание категории.
- `products` (list) — Список товаров, относящихся к категории.
- `category_count` (int) — Общее количество созданных категорий (статическое).
- `product_count` (int) — Общее количество товаров во всех категориях (статическое).

**Методы:**
- `__init__(name, description, products)` — Инициализирует объект категории.
- `parser_json(file_path)` — Парсит JSON-файл и обновляет атрибуты объекта с данными о категории.
- `add_product(prod)` — Добавляет продукт в категорию. В список можно добавить только объекты, являющиеся экземплярами класса `Product` или его наследников.
- `products` (property) — Геттер для получения списка товаров в читаемом формате.

### 3. Новые классы-наследники

Для магазина добавлены две новые категории товаров с дополнительными свойствами:

#### Smartphone

Класс для представления смартфона. Помимо свойств класса `Product` имеет следующие дополнительные атрибуты:
- `efficiency` (float) — Производительность.
- `model` (str) — Модель смартфона.
- `memory` (int) — Объем встроенной памяти.
- `color` (str) — Цвет смартфона.

#### LawnGrass

Класс для представления газонной травы. Помимо свойств класса `Product` имеет следующие дополнительные атрибуты:
- `country` (str) — Страна-производитель.
- `germination_period` (str) — Срок прорастания.
- `color` (str) — Цвет травы.

### Особенности реализации

- **Проверка при сложении продуктов:**  
  Оператор `+` реализован так, что складывать можно только объекты одного класса (например, два смартфона или две травы). Попытка сложить объекты разных классов приводит к выбросу ошибки `TypeError`.

- **Защищенный метод добавления в категорию:**  
  Метод `add_product` класса `Category` позволяет добавлять только объекты, являющиеся экземплярами `Product` или его наследниками, что исключает добавление любых других типов данных.

- **Проверка дубликатов при создании продукта:**  
  Если продукт с таким же именем уже существует в списке, его количество увеличивается, а цена обновляется до наибольшей из значений.

## Примеры использования

### 1. Создание экземпляра класса Product

```python
product = Product(name="Product1", description="Description of Product1", price=19.99, quantity=100)
```

### 2. Создание экземпляра класса Category
```python
category = Category(name="Category1", description="Description of Category1", products=[product])
```

### 3. Создание экземпляров новых классов
```python
# Создание объекта смартфона
smartphone = Smartphone(
    name="Samsung Galaxy S23 Ultra",
    description="256GB, Серый цвет, 200MP камера",
    price=180000.0,
    quantity=5,
    efficiency=95.5,
    model="S23 Ultra",
    memory=256,
    color="Серый"
)

# Создание объекта газонной травы
lawn_grass = LawnGrass(
    name="Газонная трава",
    description="Элитная трава для газона",
    price=500.0,
    quantity=20,
    country="Россия",
    germination_period="7 дней",
    color="Зеленый"
)
```
### 4. Парсинг JSON-файла
Метод parser_json позволяет заполнить данные о категории из JSON-файла:
```python
category = Category(name="", description="", products=[])
category_data = category.parser_json("path/to/categories.json")
```

Пример формата JSON:
```python
[
  {
    "name": "Category1",
    "description": "Description of Category1",
    "products": [
      {
        "name": "Product1",
        "description": "Description of Product1",
        "price": 19.99,
        "quantity": 100
      }
    ]
  }
]
```
### 5. Добавление нового продукта в категорию
```python
new_product = Product(name="New Product", description="New Product Description", price=29.99, quantity=50)
category.add_product(new_product)
```

## Тестирование
Для проверки функциональности проекта написаны юнит-тесты, которые покрывают:

- Корректное создание объектов классов Product, Smartphone, LawnGrass и Category.

- Валидацию установки цены и количества.

- Поведение оператора сложения, включая проверку на сложение объектов разных классов.

- Функциональность метода add_product для добавления только корректных объектов.

- Логику обновления продуктов при обнаружении дубликатов.

Запуск тестов осуществляется с помощью pytest:
```python
poetry run pytest --cov
```

## Установка
Для работы с проектом необходимо иметь установленный Python 3.x. Если требуется установить зависимости, воспользуйтесь менеджером пакетов poetry или pip:

### С использованием Poetry:
```bash
git clone https://github.com/BabyBlinkFeelDark/candy-shop.git
cd candy-shop
poetry install
```

### С использованием pip:
```bash
git clone https://github.com/BabyBlinkFeelDark/candy-shop.git
cd candy-shop
pip install -r requirements.txt
```
 ---

## Лицензия 

Этот проект лицензирован под [MIT License](https://mit-license.org/).